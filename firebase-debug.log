[debug] [2025-11-23T21:13:21.367Z] ----------------------------------------------------------------------
[debug] [2025-11-23T21:13:21.369Z] Command:       /home/sergio/.nvm/versions/node/v20.19.5/bin/node /usr/local/bin/firebase deploy --only functions:processVideoTask
[debug] [2025-11-23T21:13:21.369Z] CLI Version:   14.17.0
[debug] [2025-11-23T21:13:21.369Z] Platform:      linux
[debug] [2025-11-23T21:13:21.369Z] Node Version:  v20.19.5
[debug] [2025-11-23T21:13:21.369Z] Time:          Sun Nov 23 2025 16:13:21 GMT-0500 (Colombia Standard Time)
[debug] [2025-11-23T21:13:21.369Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-11-23T21:13:21.543Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-11-23T21:13:21.544Z] > authorizing via signed-in user (contactogeniality@gmail.com)
[debug] [2025-11-23T21:13:21.544Z] [iam] checking project lenovo-experiences for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2025-11-23T21:13:21.545Z] Checked if tokens are valid: false, expires at: 1763912178918
[debug] [2025-11-23T21:13:21.545Z] Checked if tokens are valid: false, expires at: 1763912178918
[debug] [2025-11-23T21:13:21.545Z] > refreshing access token with scopes: []
[debug] [2025-11-23T21:13:21.546Z] >>> [apiv2][query] POST https://www.googleapis.com/oauth2/v3/token [none]
[debug] [2025-11-23T21:13:21.546Z] >>> [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2025-11-23T21:13:21.824Z] <<< [apiv2][status] POST https://www.googleapis.com/oauth2/v3/token 200
[debug] [2025-11-23T21:13:21.824Z] <<< [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2025-11-23T21:13:21.844Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/lenovo-experiences:testIamPermissions [none]
[debug] [2025-11-23T21:13:21.844Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/lenovo-experiences:testIamPermissions x-goog-quota-user=projects/lenovo-experiences
[debug] [2025-11-23T21:13:21.844Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/lenovo-experiences:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-11-23T21:13:22.343Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/lenovo-experiences:testIamPermissions 200
[debug] [2025-11-23T21:13:22.343Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/lenovo-experiences:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-11-23T21:13:22.344Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:22.344Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:22.344Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/lenovo-experiences/serviceAccounts/lenovo-experiences@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2025-11-23T21:13:22.344Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/lenovo-experiences/serviceAccounts/lenovo-experiences@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2025-11-23T21:13:22.802Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/lenovo-experiences/serviceAccounts/lenovo-experiences@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2025-11-23T21:13:22.802Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/lenovo-experiences/serviceAccounts/lenovo-experiences@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'lenovo-experiences'...
[info] 
[info] i  deploying functions 
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] Running command: npm --prefix "$RESOURCE_DIR" run build
[info] ✔  functions: Finished running predeploy script. 
[debug] [2025-11-23T21:13:28.969Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:28.969Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:28.969Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/lenovo-experiences [none]
[debug] [2025-11-23T21:13:29.467Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/lenovo-experiences 200
[debug] [2025-11-23T21:13:29.467Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/lenovo-experiences {"projectNumber":"472633703949","projectId":"lenovo-experiences","lifecycleState":"ACTIVE","name":"lenovo-experiences","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-08-14T15:17:45.161996Z"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2025-11-23T21:13:29.470Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:29.470Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:29.470Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/lenovo-experiences/adminSdkConfig [none]
[debug] [2025-11-23T21:13:29.892Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/lenovo-experiences/adminSdkConfig 200
[debug] [2025-11-23T21:13:29.892Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/lenovo-experiences/adminSdkConfig {"projectId":"lenovo-experiences","databaseURL":"https://lenovo-experiences-default-rtdb.firebaseio.com","storageBucket":"lenovo-experiences.firebasestorage.app"}
[debug] [2025-11-23T21:13:29.892Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:29.892Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:29.893Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lenovo-experiences/configs [none]
[debug] [2025-11-23T21:13:30.183Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lenovo-experiences/configs 200
[debug] [2025-11-23T21:13:30.184Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lenovo-experiences/configs {}
[debug] [2025-11-23T21:13:30.185Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] ⚠  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2025-11-23T21:13:30.740Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "echo \"Skipping lint\"",
    "build": "tsc && cpy src/assets/**/* lib/assets",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "22"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google/genai": "^1.21.0",
    "axios": "^1.12.2",
    "firebase-admin": "^12.7.0",
    "firebase-functions": "^6.4.0",
    "sharp": "^0.34.3"
  },
  "devDependencies": {
    "@types/node": "^24.3.0",
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "cpy-cli": "^6.0.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^5.9.2"
  },
  "private": true
}
[debug] [2025-11-23T21:13:30.741Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2025-11-23T21:13:30.742Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-11-23T21:13:30.748Z] Found firebase-functions binary at '/media/sergio/B6AA20B2AA207153/photo-booth/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8475

[debug] [2025-11-23T21:13:31.633Z] Got response from /__/functions.yaml {"endpoints":{"processGoatShotHttp":{"availableMemoryMb":1024,"timeoutSeconds":540,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["us-central1"],"secretEnvironmentVariables":[{"key":"OPENAI_API_KEY"}],"labels":{},"httpsTrigger":{},"entryPoint":"processGoatShotHttp"},"getCacheStats":{"availableMemoryMb":null,"timeoutSeconds":30,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["us-central1"],"labels":{},"httpsTrigger":{},"entryPoint":"getCacheStats"},"processImageTask":{"availableMemoryMb":1024,"timeoutSeconds":540,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["us-central1"],"secretEnvironmentVariables":[{"key":"GEMINI_API_KEY"}],"labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"imageTasks/{taskId}"},"retry":false},"entryPoint":"processImageTask"},"processVideoTask":{"availableMemoryMb":1024,"timeoutSeconds":540,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["us-central1"],"labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"videoTasks/{taskId}"},"retry":false},"entryPoint":"processVideoTask"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{},"params":[{"type":"secret","name":"OPENAI_API_KEY"},{"type":"secret","name":"GEMINI_API_KEY"}]}
[info] i  extensions: ensuring required API firebaseextensions.googleapis.com is enabled... 
[debug] [2025-11-23T21:13:35.657Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-11-23T21:13:35.657Z] > authorizing via signed-in user (contactogeniality@gmail.com)
[debug] [2025-11-23T21:13:35.657Z] [iam] checking project lenovo-experiences for permissions ["firebase.projects.get","firebaseextensions.instances.list"]
[debug] [2025-11-23T21:13:35.658Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:35.658Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:35.658Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/lenovo-experiences:testIamPermissions [none]
[debug] [2025-11-23T21:13:35.658Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/lenovo-experiences:testIamPermissions x-goog-quota-user=projects/lenovo-experiences
[debug] [2025-11-23T21:13:35.658Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/lenovo-experiences:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-11-23T21:13:36.171Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/lenovo-experiences:testIamPermissions 200
[debug] [2025-11-23T21:13:36.171Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/lenovo-experiences:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-11-23T21:13:36.172Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:36.172Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:36.172Z] >>> [apiv2][query] GET https://firebaseextensions.googleapis.com/v1beta/projects/lenovo-experiences/instances pageSize=100&pageToken=
[debug] [2025-11-23T21:13:37.140Z] <<< [apiv2][status] GET https://firebaseextensions.googleapis.com/v1beta/projects/lenovo-experiences/instances 200
[debug] [2025-11-23T21:13:37.140Z] <<< [apiv2][body] GET https://firebaseextensions.googleapis.com/v1beta/projects/lenovo-experiences/instances {}
[debug] [2025-11-23T21:13:37.141Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:37.141Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:37.142Z] >>> [apiv2][query] GET https://secretmanager.googleapis.com/v1/projects/lenovo-experiences/secrets/OPENAI_API_KEY [none]
[debug] [2025-11-23T21:13:37.624Z] <<< [apiv2][status] GET https://secretmanager.googleapis.com/v1/projects/lenovo-experiences/secrets/OPENAI_API_KEY 200
[debug] [2025-11-23T21:13:37.625Z] <<< [apiv2][body] GET https://secretmanager.googleapis.com/v1/projects/lenovo-experiences/secrets/OPENAI_API_KEY {"name":"projects/472633703949/secrets/OPENAI_API_KEY","replication":{"automatic":{}},"createTime":"2025-08-21T03:12:47.675190Z","labels":{"firebase-managed":"functions"},"etag":"\"163cd776bd9f11\""}
[debug] [2025-11-23T21:13:37.625Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:37.625Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:37.625Z] >>> [apiv2][query] GET https://secretmanager.googleapis.com/v1/projects/lenovo-experiences/secrets/OPENAI_API_KEY/versions/latest [none]
[debug] [2025-11-23T21:13:37.757Z] <<< [apiv2][status] GET https://secretmanager.googleapis.com/v1/projects/lenovo-experiences/secrets/OPENAI_API_KEY/versions/latest 200
[debug] [2025-11-23T21:13:37.757Z] <<< [apiv2][body] GET https://secretmanager.googleapis.com/v1/projects/lenovo-experiences/secrets/OPENAI_API_KEY/versions/latest {"name":"projects/472633703949/secrets/OPENAI_API_KEY/versions/2","createTime":"2025-08-21T03:23:59.440461Z","state":"ENABLED","replicationStatus":{"automatic":{}},"etag":"\"163cd79ec26a4d\""}
[debug] [2025-11-23T21:13:37.758Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:37.758Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:37.758Z] >>> [apiv2][query] GET https://secretmanager.googleapis.com/v1/projects/lenovo-experiences/secrets/GEMINI_API_KEY [none]
[debug] [2025-11-23T21:13:37.993Z] <<< [apiv2][status] GET https://secretmanager.googleapis.com/v1/projects/lenovo-experiences/secrets/GEMINI_API_KEY 200
[debug] [2025-11-23T21:13:37.993Z] <<< [apiv2][body] GET https://secretmanager.googleapis.com/v1/projects/lenovo-experiences/secrets/GEMINI_API_KEY {"name":"projects/472633703949/secrets/GEMINI_API_KEY","replication":{"automatic":{}},"createTime":"2025-09-29T20:53:41.297785Z","labels":{"firebase-managed":"functions"},"etag":"\"163ff6d498a6d0\""}
[debug] [2025-11-23T21:13:37.993Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:37.993Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:37.993Z] >>> [apiv2][query] GET https://secretmanager.googleapis.com/v1/projects/lenovo-experiences/secrets/GEMINI_API_KEY/versions/latest [none]
[debug] [2025-11-23T21:13:38.104Z] <<< [apiv2][status] GET https://secretmanager.googleapis.com/v1/projects/lenovo-experiences/secrets/GEMINI_API_KEY/versions/latest 200
[debug] [2025-11-23T21:13:38.104Z] <<< [apiv2][body] GET https://secretmanager.googleapis.com/v1/projects/lenovo-experiences/secrets/GEMINI_API_KEY/versions/latest {"name":"projects/472633703949/secrets/GEMINI_API_KEY/versions/6","createTime":"2025-11-06T15:29:04.873876Z","state":"ENABLED","replicationStatus":{"automatic":{}},"etag":"\"1642eeb9aa8594\""}
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged /media/sergio/B6AA20B2AA207153/photo-booth/functions (262.49 KB) for uploading 
[debug] [2025-11-23T21:13:38.142Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:38.142Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:38.142Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/lenovo-experiences/locations/-/functions [none]
[debug] [2025-11-23T21:13:38.903Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/lenovo-experiences/locations/-/functions 200
[debug] [2025-11-23T21:13:38.903Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/lenovo-experiences/locations/-/functions {}
[debug] [2025-11-23T21:13:38.904Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:38.904Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:38.904Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/lenovo-experiences/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2025-11-23T21:13:39.443Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/lenovo-experiences/locations/-/functions 200
[debug] [2025-11-23T21:13:39.444Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/lenovo-experiences/locations/-/functions {"functions":[{"name":"projects/lenovo-experiences/locations/us-central1/functions/processImageTask","buildConfig":{"build":"projects/472633703949/locations/us-central1/builds/88f14c5d-2039-4608-933a-f28900129fe7","runtime":"nodejs22","entryPoint":"processImageTask","source":{"storageSource":{"bucket":"gcf-v2-sources-472633703949-us-central1","object":"processImageTask/function-source.zip","generation":"1762442951701405"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/lenovo-experiences/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-472633703949-us-central1","object":"processImageTask/function-source.zip","generation":"1762442951701405"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/lenovo-experiences/serviceAccounts/472633703949-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/lenovo-experiences/locations/us-central1/services/processimagetask","timeoutSeconds":540,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"lenovo-experiences\",\"storageBucket\":\"lenovo-experiences.firebasestorage.app\"}","GCLOUD_PROJECT":"lenovo-experiences","EVENTARC_CLOUD_EVENT_SOURCE":"projects/lenovo-experiences/locations/us-central1/services/processImageTask","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"processImageTask","LOG_EXECUTION_ID":"true"},"maxInstanceCount":3,"ingressSettings":"ALLOW_ALL","uri":"https://processimagetask-rwkor6m4fa-uc.a.run.app","serviceAccountEmail":"472633703949-compute@developer.gserviceaccount.com","availableMemory":"1024Mi","allTrafficOnLatestRevision":true,"secretEnvironmentVariables":[{"key":"GEMINI_API_KEY","projectId":"lenovo-experiences","secret":"GEMINI_API_KEY","version":"6"}],"revision":"processimagetask-00036-sic","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/lenovo-experiences/locations/nam5/triggers/processimagetask-692205","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"imageTasks/{taskId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/lenovo-experiences/topics/eventarc-nam5-processimagetask-692205-241","serviceAccountEmail":"472633703949-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","updateTime":"2025-11-06T15:29:52.180637416Z","labels":{"firebase-functions-hash":"843926349fa4b714f8d7645540d963a79203d7c5","deployment-tool":"cli-firebase"},"environment":"GEN_2","url":"https://us-central1-lenovo-experiences.cloudfunctions.net/processImageTask","createTime":"2025-08-21T03:32:22.057204523Z","satisfiesPzi":true},{"name":"projects/lenovo-experiences/locations/us-central1/functions/getCacheStats","buildConfig":{"build":"projects/472633703949/locations/us-central1/builds/c6c8092c-8c59-4cc2-8bf4-5350a397649f","runtime":"nodejs22","entryPoint":"getCacheStats","source":{"storageSource":{"bucket":"gcf-v2-sources-472633703949-us-central1","object":"getCacheStats/function-source.zip","generation":"1759349626765606"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/lenovo-experiences/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-472633703949-us-central1","object":"getCacheStats/function-source.zip","generation":"1759349626765606"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/lenovo-experiences/serviceAccounts/472633703949-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/lenovo-experiences/locations/us-central1/services/getcachestats","timeoutSeconds":30,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"lenovo-experiences\",\"storageBucket\":\"lenovo-experiences.firebasestorage.app\"}","GCLOUD_PROJECT":"lenovo-experiences","EVENTARC_CLOUD_EVENT_SOURCE":"projects/lenovo-experiences/locations/us-central1/services/getCacheStats","FUNCTION_TARGET":"getCacheStats","LOG_EXECUTION_ID":"true"},"maxInstanceCount":3,"ingressSettings":"ALLOW_ALL","uri":"https://getcachestats-rwkor6m4fa-uc.a.run.app","serviceAccountEmail":"472633703949-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"getcachestats-00027-cow","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","updateTime":"2025-11-04T16:43:42.868088656Z","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"a5995d06af501e329de2621262f77554c24dd5fa"},"environment":"GEN_2","url":"https://us-central1-lenovo-experiences.cloudfunctions.net/getCacheStats","createTime":"2025-09-24T14:25:11.631816883Z","satisfiesPzi":true},{"name":"projects/lenovo-experiences/locations/us-central1/functions/processGoatShotHttp","buildConfig":{"build":"projects/472633703949/locations/us-central1/builds/d3ce2326-f84d-440b-a01d-3e4badf50861","runtime":"nodejs22","entryPoint":"processGoatShotHttp","source":{"storageSource":{"bucket":"gcf-v2-sources-472633703949-us-central1","object":"processGoatShotHttp/function-source.zip","generation":"1759349626733281"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/lenovo-experiences/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-472633703949-us-central1","object":"processGoatShotHttp/function-source.zip","generation":"1759349626733281"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/lenovo-experiences/serviceAccounts/472633703949-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/lenovo-experiences/locations/us-central1/services/processgoatshothttp","timeoutSeconds":540,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"lenovo-experiences\",\"storageBucket\":\"lenovo-experiences.firebasestorage.app\"}","GCLOUD_PROJECT":"lenovo-experiences","EVENTARC_CLOUD_EVENT_SOURCE":"projects/lenovo-experiences/locations/us-central1/services/processGoatShotHttp","FUNCTION_TARGET":"processGoatShotHttp","LOG_EXECUTION_ID":"true"},"maxInstanceCount":3,"ingressSettings":"ALLOW_ALL","uri":"https://processgoatshothttp-rwkor6m4fa-uc.a.run.app","serviceAccountEmail":"472633703949-compute@developer.gserviceaccount.com","availableMemory":"1024Mi","allTrafficOnLatestRevision":true,"secretEnvironmentVariables":[{"key":"OPENAI_API_KEY","projectId":"lenovo-experiences","secret":"OPENAI_API_KEY","version":"2"}],"revision":"processgoatshothttp-00031-pok","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","updateTime":"2025-11-04T16:43:42.930537783Z","labels":{"firebase-functions-hash":"15e45d0e290c52310ce7043bf3ccf7d1cc80ff98","deployment-tool":"cli-firebase"},"environment":"GEN_2","url":"https://us-central1-lenovo-experiences.cloudfunctions.net/processGoatShotHttp","createTime":"2025-09-04T14:13:11.715530260Z","satisfiesPzi":true},{"name":"projects/lenovo-experiences/locations/us-central1/functions/processVideoTask","buildConfig":{"build":"projects/472633703949/locations/us-central1/builds/3fe4fd10-1c9c-4359-817d-6c1f39d51cbe","runtime":"nodejs22","entryPoint":"processVideoTask","source":{"storageSource":{"bucket":"gcf-v2-sources-472633703949-us-central1","object":"processVideoTask/function-source.zip","generation":"1763909553015947"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/lenovo-experiences/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-472633703949-us-central1","object":"processVideoTask/function-source.zip","generation":"1763909553015947"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/lenovo-experiences/serviceAccounts/472633703949-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/lenovo-experiences/locations/us-central1/services/processvideotask","timeoutSeconds":540,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"lenovo-experiences\",\"databaseURL\":\"https://lenovo-experiences-default-rtdb.firebaseio.com\",\"storageBucket\":\"lenovo-experiences.firebasestorage.app\"}","GCLOUD_PROJECT":"lenovo-experiences","EVENTARC_CLOUD_EVENT_SOURCE":"projects/lenovo-experiences/locations/us-central1/services/processVideoTask","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"processVideoTask","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://processvideotask-rwkor6m4fa-uc.a.run.app","serviceAccountEmail":"472633703949-compute@developer.gserviceaccount.com","availableMemory":"1024Mi","allTrafficOnLatestRevision":true,"secretEnvironmentVariables":[{"key":"GEMINI_API_KEY","projectId":"lenovo-experiences","secret":"GEMINI_API_KEY","version":"6"}],"revision":"processvideotask-00057-qum","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/lenovo-experiences/locations/nam5/triggers/processvideotask-777831","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"videoTasks/{taskId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/lenovo-experiences/topics/eventarc-nam5-processvideotask-777831-670","serviceAccountEmail":"472633703949-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","updateTime":"2025-11-23T14:53:24.665905234Z","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"8e78c170a40a9578bf4e3f90e8f395c233a5625d"},"environment":"GEN_2","url":"https://us-central1-lenovo-experiences.cloudfunctions.net/processVideoTask","createTime":"2025-11-20T13:32:32.168962824Z","satisfiesPzi":true},{"name":"projects/lenovo-experiences/locations/us-central1/functions/generateImageGemini","buildConfig":{"build":"projects/472633703949/locations/us-central1/builds/b6caae05-e8de-43a8-aa67-5e9e07b4a4dd","runtime":"nodejs22","entryPoint":"generateImageGemini","source":{"storageSource":{"bucket":"gcf-v2-sources-472633703949-us-central1","object":"generateImageGemini/function-source.zip","generation":"1762442951432335"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/lenovo-experiences/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-472633703949-us-central1","object":"generateImageGemini/function-source.zip","generation":"1762442951432335"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/lenovo-experiences/serviceAccounts/472633703949-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/lenovo-experiences/locations/us-central1/services/generateimagegemini","timeoutSeconds":540,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"lenovo-experiences\",\"databaseURL\":\"https://lenovo-experiences-default-rtdb.firebaseio.com\",\"storageBucket\":\"lenovo-experiences.firebasestorage.app\"}","GCLOUD_PROJECT":"lenovo-experiences","EVENTARC_CLOUD_EVENT_SOURCE":"projects/lenovo-experiences/locations/us-central1/services/generateImageGemini","FUNCTION_TARGET":"generateImageGemini","LOG_EXECUTION_ID":"true"},"maxInstanceCount":3,"ingressSettings":"ALLOW_ALL","uri":"https://generateimagegemini-rwkor6m4fa-uc.a.run.app","serviceAccountEmail":"472633703949-compute@developer.gserviceaccount.com","availableMemory":"1024Mi","allTrafficOnLatestRevision":true,"secretEnvironmentVariables":[{"key":"GEMINI_API_KEY","projectId":"lenovo-experiences","secret":"GEMINI_API_KEY","version":"6"}],"revision":"generateimagegemini-00002-loy","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","updateTime":"2025-11-06T15:30:08.010500536Z","labels":{"firebase-functions-hash":"05755977e27bb132696745a503a63ac5f8438d32","deployment-tool":"cli-firebase"},"environment":"GEN_2","url":"https://us-central1-lenovo-experiences.cloudfunctions.net/generateImageGemini","createTime":"2025-11-06T15:26:39.563002388Z","satisfiesPzi":true},{"name":"projects/lenovo-experiences/locations/us-central1/functions/api","buildConfig":{"build":"projects/472633703949/locations/us-central1/builds/c466aa4c-7d36-4961-8763-260ffb9d979e","runtime":"nodejs22","entryPoint":"api","source":{"storageSource":{"bucket":"gcf-v2-sources-472633703949-us-central1","object":"api/function-source.zip","generation":"1756986438907730"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/lenovo-experiences/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-472633703949-us-central1","object":"api/function-source.zip","generation":"1756986438907730"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/lenovo-experiences/serviceAccounts/472633703949-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/lenovo-experiences/locations/us-central1/services/api","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"lenovo-experiences\",\"storageBucket\":\"lenovo-experiences.firebasestorage.app\"}","GCLOUD_PROJECT":"lenovo-experiences","EVENTARC_CLOUD_EVENT_SOURCE":"projects/lenovo-experiences/locations/us-central1/services/api","FUNCTION_TARGET":"api","LOG_EXECUTION_ID":"true"},"maxInstanceCount":3,"ingressSettings":"ALLOW_ALL","uri":"https://api-rwkor6m4fa-uc.a.run.app","serviceAccountEmail":"472633703949-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"secretEnvironmentVariables":[{"key":"INGEST_TOKEN","projectId":"lenovo-experiences","secret":"INGEST_TOKEN","version":"1"}],"revision":"api-00005-jup","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","updateTime":"2025-11-04T16:43:42.969791401Z","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"271541b5d83ebca722895efc59a182c7292cdab3"},"environment":"GEN_2","url":"https://us-central1-lenovo-experiences.cloudfunctions.net/api","createTime":"2025-09-01T19:12:33.533408283Z","satisfiesPzi":true}]}
[debug] [2025-11-23T21:13:39.446Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:39.446Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:39.446Z] >>> [apiv2][query] GET https://firestore.googleapis.com/v1/projects/lenovo-experiences/databases/(default) [none]
[debug] [2025-11-23T21:13:40.213Z] <<< [apiv2][status] GET https://firestore.googleapis.com/v1/projects/lenovo-experiences/databases/(default) 200
[debug] [2025-11-23T21:13:40.213Z] <<< [apiv2][body] GET https://firestore.googleapis.com/v1/projects/lenovo-experiences/databases/(default) {"name":"projects/lenovo-experiences/databases/(default)","uid":"9801e2c4-72cf-4a2f-a2bf-bef3ec170a44","createTime":"2025-08-14T15:21:33.248442Z","updateTime":"2025-08-14T15:21:33.248442Z","locationId":"nam5","type":"FIRESTORE_NATIVE","concurrencyMode":"PESSIMISTIC","versionRetentionPeriod":"3600s","earliestVersionTime":"2025-11-23T20:13:40.191070Z","appEngineIntegrationMode":"DISABLED","keyPrefix":"s","pointInTimeRecoveryEnablement":"POINT_IN_TIME_RECOVERY_DISABLED","deleteProtectionState":"DELETE_PROTECTION_DISABLED","databaseEdition":"STANDARD","freeTier":true,"realtimeUpdatesMode":"REALTIME_UPDATES_MODE_ENABLED","etag":"IKziwKqYiZEDMNvY+pbOio8D"}
[info] i  functions: ensuring required API run.googleapis.com is enabled... 
[info] i  functions: ensuring required API eventarc.googleapis.com is enabled... 
[info] i  functions: ensuring required API pubsub.googleapis.com is enabled... 
[info] i  functions: ensuring required API storage.googleapis.com is enabled... 
[info] i  functions: generating the service identity for pubsub.googleapis.com... 
[debug] [2025-11-23T21:13:40.215Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:40.215Z] Checked if tokens are valid: true, expires at: 1763936000824
[info] i  functions: generating the service identity for eventarc.googleapis.com... 
[debug] [2025-11-23T21:13:40.215Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:40.215Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:40.215Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/472633703949/services/pubsub.googleapis.com:generateServiceIdentity [none]
[debug] [2025-11-23T21:13:40.215Z] >>> [apiv2][(partial)header] POST https://serviceusage.googleapis.com/v1beta1/projects/472633703949/services/pubsub.googleapis.com:generateServiceIdentity x-goog-quota-user=projects/472633703949
[debug] [2025-11-23T21:13:40.215Z] >>> [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/472633703949/services/pubsub.googleapis.com:generateServiceIdentity {}
[debug] [2025-11-23T21:13:40.216Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/472633703949/services/eventarc.googleapis.com:generateServiceIdentity [none]
[debug] [2025-11-23T21:13:40.216Z] >>> [apiv2][(partial)header] POST https://serviceusage.googleapis.com/v1beta1/projects/472633703949/services/eventarc.googleapis.com:generateServiceIdentity x-goog-quota-user=projects/472633703949
[debug] [2025-11-23T21:13:40.216Z] >>> [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/472633703949/services/eventarc.googleapis.com:generateServiceIdentity {}
[debug] [2025-11-23T21:13:40.928Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/472633703949/services/eventarc.googleapis.com:generateServiceIdentity 200
[debug] [2025-11-23T21:13:40.928Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/472633703949/services/eventarc.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-472633703949@gcp-sa-eventarc.iam.gserviceaccount.com","uniqueId":"115358482011349281154"}}
[debug] [2025-11-23T21:13:40.946Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/472633703949/services/pubsub.googleapis.com:generateServiceIdentity 200
[debug] [2025-11-23T21:13:40.946Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/472633703949/services/pubsub.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-472633703949@gcp-sa-pubsub.iam.gserviceaccount.com","uniqueId":"105601027429022939450"}}
[info] i  functions: ensuring required API secretmanager.googleapis.com is enabled... 
[debug] [2025-11-23T21:13:40.947Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:40.948Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:40.948Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/lenovo-experiences [none]
[debug] [2025-11-23T21:13:41.088Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/lenovo-experiences 200
[debug] [2025-11-23T21:13:41.088Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/lenovo-experiences {"projectNumber":"472633703949","projectId":"lenovo-experiences","lifecycleState":"ACTIVE","name":"lenovo-experiences","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-08-14T15:17:45.161996Z"}
[debug] [2025-11-23T21:13:41.089Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:41.089Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:41.089Z] >>> [apiv2][query] GET https://compute.googleapis.com/compute/v1/projects/472633703949 [none]
[debug] [2025-11-23T21:13:41.289Z] <<< [apiv2][status] GET https://compute.googleapis.com/compute/v1/projects/472633703949 403
[debug] [2025-11-23T21:13:41.289Z] <<< [apiv2][body] GET https://compute.googleapis.com/compute/v1/projects/472633703949 {"error":{"code":403,"message":"Compute Engine API has not been used in project 472633703949 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=472633703949 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 472633703949 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=472633703949 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"service":"compute.googleapis.com","activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=472633703949","consumer":"projects/472633703949","serviceTitle":"Compute Engine API","containerInfo":"472633703949"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 472633703949 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=472633703949 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=472633703949"}]}]}}
[debug] [2025-11-23T21:13:41.290Z] unable to look up default compute service account. Falling back to 472633703949-compute@developer.gserviceaccount.com. Error: {"name":"FirebaseError","children":[],"context":{"body":{"error":{"code":403,"message":"Compute Engine API has not been used in project 472633703949 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=472633703949 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 472633703949 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=472633703949 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"service":"compute.googleapis.com","activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=472633703949","consumer":"projects/472633703949","serviceTitle":"Compute Engine API","containerInfo":"472633703949"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 472633703949 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=472633703949 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=472633703949"}]}]}},"response":{"statusCode":403}},"exit":1,"message":"Request to https://compute.googleapis.com/compute/v1/projects/472633703949 had HTTP Error: 403, Compute Engine API has not been used in project 472633703949 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=472633703949 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","status":403}
[debug] [2025-11-23T21:13:41.291Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:41.291Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:41.291Z] >>> [apiv2][query] GET https://cloudbilling.googleapis.com/v1/projects/lenovo-experiences/billingInfo [none]
[debug] [2025-11-23T21:13:41.599Z] <<< [apiv2][status] GET https://cloudbilling.googleapis.com/v1/projects/lenovo-experiences/billingInfo 200
[debug] [2025-11-23T21:13:41.599Z] <<< [apiv2][body] GET https://cloudbilling.googleapis.com/v1/projects/lenovo-experiences/billingInfo {"name":"projects/lenovo-experiences/billingInfo","projectId":"lenovo-experiences","billingAccountName":"billingAccounts/01EEB5-3F80A6-962EC7","billingEnabled":true}
[debug] [2025-11-23T21:13:41.599Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:41.600Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:41.600Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v2/projects/lenovo-experiences/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2025-11-23T21:13:41.972Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v2/projects/lenovo-experiences/locations/us-central1/functions:generateUploadUrl 200
[debug] [2025-11-23T21:13:41.972Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/lenovo-experiences/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/gcf-v2-uploads-472633703949.us-central1.cloudfunctions.appspot.com/f12fb419-dc9b-45aa-8da0-c91df5eba003.zip?GoogleAccessId=service-472633703949@gcf-admin-robot.iam.gserviceaccount.com&Expires=1763934221&Signature=fIz4%2BVPRLGLfXWB%2F8JI4%2BOTBFXGZViRPfKLiRHPIte2DWJrog4sUmqIyngbDhNmCPab%2FEZcccJQH7R%2Fh39FzYx0htI00Zl5nlMHq4L2%2BsCNzaF4Y0SJ9la9N1La4QcN%2BSyA3TyzFRRyIMOZNrXSq%2BMswHAuEKEFHL40WbZAPdM5Z6sz8jqdAQi%2Bz%2BIf%2B0jEFZ6OqFZt2dT93uJ0309hafy%2B5L1uIn8naR5TnL1pHiFz8rsW9lGV2r%2Bajdi%2BTNFqXN9F6DKxhCdQKGhBzEQ7P80MAn59ScMdutkTva9VwolKlZvM%2B9CEf1OzX1rI8m5Gxg90TStYsWw6C%2FoNNVuzL6w%3D%3D","storageSource":{"bucket":"gcf-v2-uploads-472633703949.us-central1.cloudfunctions.appspot.com","object":"f12fb419-dc9b-45aa-8da0-c91df5eba003.zip"}}
[debug] [2025-11-23T21:13:41.973Z] >>> [apiv2][query] PUT https://storage.googleapis.com/gcf-v2-uploads-472633703949.us-central1.cloudfunctions.appspot.com/f12fb419-dc9b-45aa-8da0-c91df5eba003.zip GoogleAccessId=service-472633703949%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1763934221&Signature=fIz4%2BVPRLGLfXWB%2F8JI4%2BOTBFXGZViRPfKLiRHPIte2DWJrog4sUmqIyngbDhNmCPab%2FEZcccJQH7R%2Fh39FzYx0htI00Zl5nlMHq4L2%2BsCNzaF4Y0SJ9la9N1La4QcN%2BSyA3TyzFRRyIMOZNrXSq%2BMswHAuEKEFHL40WbZAPdM5Z6sz8jqdAQi%2Bz%2BIf%2B0jEFZ6OqFZt2dT93uJ0309hafy%2B5L1uIn8naR5TnL1pHiFz8rsW9lGV2r%2Bajdi%2BTNFqXN9F6DKxhCdQKGhBzEQ7P80MAn59ScMdutkTva9VwolKlZvM%2B9CEf1OzX1rI8m5Gxg90TStYsWw6C%2FoNNVuzL6w%3D%3D
[debug] [2025-11-23T21:13:41.973Z] >>> [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-472633703949.us-central1.cloudfunctions.appspot.com/f12fb419-dc9b-45aa-8da0-c91df5eba003.zip [stream]
[debug] [2025-11-23T21:13:42.818Z] <<< [apiv2][status] PUT https://storage.googleapis.com/gcf-v2-uploads-472633703949.us-central1.cloudfunctions.appspot.com/f12fb419-dc9b-45aa-8da0-c91df5eba003.zip 200
[debug] [2025-11-23T21:13:42.818Z] <<< [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-472633703949.us-central1.cloudfunctions.appspot.com/f12fb419-dc9b-45aa-8da0-c91df5eba003.zip [omitted]
[info] ✔  functions: functions source uploaded successfully 
[info] i  functions: updating Node.js 22 (2nd Gen) function processVideoTask(us-central1)... 
[debug] [2025-11-23T21:13:42.821Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:42.821Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:42.821Z] >>> [apiv2][query] PATCH https://cloudfunctions.googleapis.com/v2/projects/lenovo-experiences/locations/us-central1/functions/processVideoTask updateMask=name%2CbuildConfig.runtime%2CbuildConfig.entryPoint%2CbuildConfig.source.storageSource.bucket%2CbuildConfig.source.storageSource.object%2CbuildConfig.environmentVariables%2CbuildConfig.sourceToken%2CserviceConfig.environmentVariables%2CserviceConfig.ingressSettings%2CserviceConfig.timeoutSeconds%2CserviceConfig.serviceAccountEmail%2CserviceConfig.availableMemory%2CserviceConfig.minInstanceCount%2CserviceConfig.maxInstanceCount%2CserviceConfig.maxInstanceRequestConcurrency%2CserviceConfig.availableCpu%2CserviceConfig.vpcConnector%2CserviceConfig.vpcConnectorEgressSettings%2Clabels%2CeventTrigger.eventType%2CeventTrigger.retryPolicy%2CeventTrigger.eventFilters%2CeventTrigger.triggerRegion
[debug] [2025-11-23T21:13:42.821Z] >>> [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/lenovo-experiences/locations/us-central1/functions/processVideoTask {"name":"projects/lenovo-experiences/locations/us-central1/functions/processVideoTask","buildConfig":{"runtime":"nodejs22","entryPoint":"processVideoTask","source":{"storageSource":{"bucket":"gcf-v2-uploads-472633703949.us-central1.cloudfunctions.appspot.com","object":"f12fb419-dc9b-45aa-8da0-c91df5eba003.zip"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}},"serviceConfig":{"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"lenovo-experiences\",\"databaseURL\":\"https://lenovo-experiences-default-rtdb.firebaseio.com\",\"storageBucket\":\"lenovo-experiences.firebasestorage.app\"}","GCLOUD_PROJECT":"lenovo-experiences","EVENTARC_CLOUD_EVENT_SOURCE":"projects/lenovo-experiences/locations/us-central1/services/processVideoTask","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"processVideoTask","LOG_EXECUTION_ID":"true"},"ingressSettings":null,"timeoutSeconds":540,"serviceAccountEmail":null,"availableMemory":"1024Mi","minInstanceCount":null,"maxInstanceCount":null,"maxInstanceRequestConcurrency":80,"availableCpu":"1","vpcConnector":null,"vpcConnectorEgressSettings":null},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"85ba389a3d5ac9867509c735ef089838ba668bcb"},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"videoTasks/{taskId}","operator":"match-path-pattern"}],"triggerRegion":"nam5"}}
[debug] [2025-11-23T21:13:43.992Z] <<< [apiv2][status] PATCH https://cloudfunctions.googleapis.com/v2/projects/lenovo-experiences/locations/us-central1/functions/processVideoTask 200
[debug] [2025-11-23T21:13:43.992Z] <<< [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/lenovo-experiences/locations/us-central1/functions/processVideoTask {"name":"projects/lenovo-experiences/locations/us-central1/operations/operation-1763932423093-64449857c7cea-eac6395e-fa94a2d3","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-11-23T21:13:43.955607725Z","target":"projects/lenovo-experiences/locations/us-central1/functions/processVideoTask","verb":"update","cancelRequested":false,"apiVersion":"v2"},"done":false}
[debug] [2025-11-23T21:13:43.993Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:43.993Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:43.993Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/lenovo-experiences/locations/us-central1/operations/operation-1763932423093-64449857c7cea-eac6395e-fa94a2d3 [none]
[debug] [2025-11-23T21:13:44.285Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/lenovo-experiences/locations/us-central1/operations/operation-1763932423093-64449857c7cea-eac6395e-fa94a2d3 200
[debug] [2025-11-23T21:13:44.285Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/lenovo-experiences/locations/us-central1/operations/operation-1763932423093-64449857c7cea-eac6395e-fa94a2d3 {"name":"projects/lenovo-experiences/locations/us-central1/operations/operation-1763932423093-64449857c7cea-eac6395e-fa94a2d3","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-11-23T21:13:43.955607725Z","target":"projects/lenovo-experiences/locations/us-central1/functions/processVideoTask","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/lenovo-experiences/locations/us-central1/functions/processVideoTask","buildConfig":{"runtime":"nodejs22","entryPoint":"processVideoTask","source":{"storageSource":{"bucket":"gcf-v2-sources-472633703949-us-central1","object":"processVideoTask/function-source.zip","generation":"1763932423903604"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/lenovo-experiences/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-472633703949-us-central1","object":"processVideoTask/function-source.zip","generation":"1763909553015947"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/lenovo-experiences/serviceAccounts/472633703949-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/lenovo-experiences/locations/us-central1/services/processvideotask","timeoutSeconds":540,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"lenovo-experiences\",\"databaseURL\":\"https://lenovo-experiences-default-rtdb.firebaseio.com\",\"storageBucket\":\"lenovo-experiences.firebasestorage.app\"}","GCLOUD_PROJECT":"lenovo-experiences","EVENTARC_CLOUD_EVENT_SOURCE":"projects/lenovo-experiences/locations/us-central1/services/processVideoTask","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"processVideoTask","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://processvideotask-rwkor6m4fa-uc.a.run.app","serviceAccountEmail":"472633703949-compute@developer.gserviceaccount.com","availableMemory":"1024Mi","allTrafficOnLatestRevision":true,"secretEnvironmentVariables":[{"key":"GEMINI_API_KEY","projectId":"lenovo-experiences","secret":"GEMINI_API_KEY","version":"6"}],"revision":"processvideotask-00057-qum","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/lenovo-experiences/locations/nam5/triggers/processvideotask-777831","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"videoTasks/{taskId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/lenovo-experiences/topics/eventarc-nam5-processvideotask-777831-670","serviceAccountEmail":"472633703949-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"85ba389a3d5ac9867509c735ef089838ba668bcb"},"environment":"GEN_2","url":"https://us-central1-lenovo-experiences.cloudfunctions.net/processVideoTask","satisfiesPzi":true},"stages":[{"name":"BUILD","state":"NOT_STARTED"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION"},"done":false}
[debug] [2025-11-23T21:13:44.786Z] [update-default-us-central1-processVideoTask] Retrying task index 0
[debug] [2025-11-23T21:13:44.786Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:44.786Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:44.787Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/lenovo-experiences/locations/us-central1/operations/operation-1763932423093-64449857c7cea-eac6395e-fa94a2d3 [none]
[debug] [2025-11-23T21:13:45.065Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/lenovo-experiences/locations/us-central1/operations/operation-1763932423093-64449857c7cea-eac6395e-fa94a2d3 200
[debug] [2025-11-23T21:13:45.065Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/lenovo-experiences/locations/us-central1/operations/operation-1763932423093-64449857c7cea-eac6395e-fa94a2d3 {"name":"projects/lenovo-experiences/locations/us-central1/operations/operation-1763932423093-64449857c7cea-eac6395e-fa94a2d3","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-11-23T21:13:43.955607725Z","target":"projects/lenovo-experiences/locations/us-central1/functions/processVideoTask","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/lenovo-experiences/locations/us-central1/functions/processVideoTask","buildConfig":{"runtime":"nodejs22","entryPoint":"processVideoTask","source":{"storageSource":{"bucket":"gcf-v2-sources-472633703949-us-central1","object":"processVideoTask/function-source.zip","generation":"1763932423903604"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/lenovo-experiences/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-472633703949-us-central1","object":"processVideoTask/function-source.zip","generation":"1763909553015947"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/lenovo-experiences/serviceAccounts/472633703949-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/lenovo-experiences/locations/us-central1/services/processvideotask","timeoutSeconds":540,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"lenovo-experiences\",\"databaseURL\":\"https://lenovo-experiences-default-rtdb.firebaseio.com\",\"storageBucket\":\"lenovo-experiences.firebasestorage.app\"}","GCLOUD_PROJECT":"lenovo-experiences","EVENTARC_CLOUD_EVENT_SOURCE":"projects/lenovo-experiences/locations/us-central1/services/processVideoTask","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"processVideoTask","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://processvideotask-rwkor6m4fa-uc.a.run.app","serviceAccountEmail":"472633703949-compute@developer.gserviceaccount.com","availableMemory":"1024Mi","allTrafficOnLatestRevision":true,"secretEnvironmentVariables":[{"key":"GEMINI_API_KEY","projectId":"lenovo-experiences","secret":"GEMINI_API_KEY","version":"6"}],"revision":"processvideotask-00057-qum","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/lenovo-experiences/locations/nam5/triggers/processvideotask-777831","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"videoTasks/{taskId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/lenovo-experiences/topics/eventarc-nam5-processvideotask-777831-670","serviceAccountEmail":"472633703949-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"85ba389a3d5ac9867509c735ef089838ba668bcb"},"environment":"GEN_2","url":"https://us-central1-lenovo-experiences.cloudfunctions.net/processVideoTask","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/472633703949/locations/us-central1/builds/ee0b2355-5560-448f-a877-73579db9ccc5","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/ee0b2355-5560-448f-a877-73579db9ccc5?project=472633703949"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/472633703949/locations/us-central1/builds/ee0b2355-5560-448f-a877-73579db9ccc5"},"done":false}
[debug] [2025-11-23T21:13:46.065Z] [update-default-us-central1-processVideoTask] Retrying task index 0
[debug] [2025-11-23T21:13:46.066Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:46.066Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:46.066Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/lenovo-experiences/locations/us-central1/operations/operation-1763932423093-64449857c7cea-eac6395e-fa94a2d3 [none]
[debug] [2025-11-23T21:13:46.355Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/lenovo-experiences/locations/us-central1/operations/operation-1763932423093-64449857c7cea-eac6395e-fa94a2d3 200
[debug] [2025-11-23T21:13:46.355Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/lenovo-experiences/locations/us-central1/operations/operation-1763932423093-64449857c7cea-eac6395e-fa94a2d3 {"name":"projects/lenovo-experiences/locations/us-central1/operations/operation-1763932423093-64449857c7cea-eac6395e-fa94a2d3","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-11-23T21:13:43.955607725Z","target":"projects/lenovo-experiences/locations/us-central1/functions/processVideoTask","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/lenovo-experiences/locations/us-central1/functions/processVideoTask","buildConfig":{"runtime":"nodejs22","entryPoint":"processVideoTask","source":{"storageSource":{"bucket":"gcf-v2-sources-472633703949-us-central1","object":"processVideoTask/function-source.zip","generation":"1763932423903604"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/lenovo-experiences/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-472633703949-us-central1","object":"processVideoTask/function-source.zip","generation":"1763909553015947"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/lenovo-experiences/serviceAccounts/472633703949-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/lenovo-experiences/locations/us-central1/services/processvideotask","timeoutSeconds":540,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"lenovo-experiences\",\"databaseURL\":\"https://lenovo-experiences-default-rtdb.firebaseio.com\",\"storageBucket\":\"lenovo-experiences.firebasestorage.app\"}","GCLOUD_PROJECT":"lenovo-experiences","EVENTARC_CLOUD_EVENT_SOURCE":"projects/lenovo-experiences/locations/us-central1/services/processVideoTask","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"processVideoTask","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://processvideotask-rwkor6m4fa-uc.a.run.app","serviceAccountEmail":"472633703949-compute@developer.gserviceaccount.com","availableMemory":"1024Mi","allTrafficOnLatestRevision":true,"secretEnvironmentVariables":[{"key":"GEMINI_API_KEY","projectId":"lenovo-experiences","secret":"GEMINI_API_KEY","version":"6"}],"revision":"processvideotask-00057-qum","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/lenovo-experiences/locations/nam5/triggers/processvideotask-777831","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"videoTasks/{taskId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/lenovo-experiences/topics/eventarc-nam5-processvideotask-777831-670","serviceAccountEmail":"472633703949-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"85ba389a3d5ac9867509c735ef089838ba668bcb"},"environment":"GEN_2","url":"https://us-central1-lenovo-experiences.cloudfunctions.net/processVideoTask","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/472633703949/locations/us-central1/builds/ee0b2355-5560-448f-a877-73579db9ccc5","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/ee0b2355-5560-448f-a877-73579db9ccc5?project=472633703949"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/472633703949/locations/us-central1/builds/ee0b2355-5560-448f-a877-73579db9ccc5"},"done":false}
[debug] [2025-11-23T21:13:48.356Z] [update-default-us-central1-processVideoTask] Retrying task index 0
[debug] [2025-11-23T21:13:48.356Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:48.356Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:48.356Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/lenovo-experiences/locations/us-central1/operations/operation-1763932423093-64449857c7cea-eac6395e-fa94a2d3 [none]
[debug] [2025-11-23T21:13:48.622Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/lenovo-experiences/locations/us-central1/operations/operation-1763932423093-64449857c7cea-eac6395e-fa94a2d3 200
[debug] [2025-11-23T21:13:48.622Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/lenovo-experiences/locations/us-central1/operations/operation-1763932423093-64449857c7cea-eac6395e-fa94a2d3 {"name":"projects/lenovo-experiences/locations/us-central1/operations/operation-1763932423093-64449857c7cea-eac6395e-fa94a2d3","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-11-23T21:13:43.955607725Z","target":"projects/lenovo-experiences/locations/us-central1/functions/processVideoTask","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/lenovo-experiences/locations/us-central1/functions/processVideoTask","buildConfig":{"runtime":"nodejs22","entryPoint":"processVideoTask","source":{"storageSource":{"bucket":"gcf-v2-sources-472633703949-us-central1","object":"processVideoTask/function-source.zip","generation":"1763932423903604"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/lenovo-experiences/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-472633703949-us-central1","object":"processVideoTask/function-source.zip","generation":"1763909553015947"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/lenovo-experiences/serviceAccounts/472633703949-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/lenovo-experiences/locations/us-central1/services/processvideotask","timeoutSeconds":540,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"lenovo-experiences\",\"databaseURL\":\"https://lenovo-experiences-default-rtdb.firebaseio.com\",\"storageBucket\":\"lenovo-experiences.firebasestorage.app\"}","GCLOUD_PROJECT":"lenovo-experiences","EVENTARC_CLOUD_EVENT_SOURCE":"projects/lenovo-experiences/locations/us-central1/services/processVideoTask","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"processVideoTask","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://processvideotask-rwkor6m4fa-uc.a.run.app","serviceAccountEmail":"472633703949-compute@developer.gserviceaccount.com","availableMemory":"1024Mi","allTrafficOnLatestRevision":true,"secretEnvironmentVariables":[{"key":"GEMINI_API_KEY","projectId":"lenovo-experiences","secret":"GEMINI_API_KEY","version":"6"}],"revision":"processvideotask-00057-qum","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/lenovo-experiences/locations/nam5/triggers/processvideotask-777831","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"videoTasks/{taskId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/lenovo-experiences/topics/eventarc-nam5-processvideotask-777831-670","serviceAccountEmail":"472633703949-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"85ba389a3d5ac9867509c735ef089838ba668bcb"},"environment":"GEN_2","url":"https://us-central1-lenovo-experiences.cloudfunctions.net/processVideoTask","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/472633703949/locations/us-central1/builds/ee0b2355-5560-448f-a877-73579db9ccc5","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/ee0b2355-5560-448f-a877-73579db9ccc5?project=472633703949"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/472633703949/locations/us-central1/builds/ee0b2355-5560-448f-a877-73579db9ccc5"},"done":false}
[debug] [2025-11-23T21:13:52.624Z] [update-default-us-central1-processVideoTask] Retrying task index 0
[debug] [2025-11-23T21:13:52.624Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:52.624Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:13:52.624Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/lenovo-experiences/locations/us-central1/operations/operation-1763932423093-64449857c7cea-eac6395e-fa94a2d3 [none]
[debug] [2025-11-23T21:13:52.762Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/lenovo-experiences/locations/us-central1/operations/operation-1763932423093-64449857c7cea-eac6395e-fa94a2d3 200
[debug] [2025-11-23T21:13:52.762Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/lenovo-experiences/locations/us-central1/operations/operation-1763932423093-64449857c7cea-eac6395e-fa94a2d3 {"name":"projects/lenovo-experiences/locations/us-central1/operations/operation-1763932423093-64449857c7cea-eac6395e-fa94a2d3","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-11-23T21:13:43.955607725Z","target":"projects/lenovo-experiences/locations/us-central1/functions/processVideoTask","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/lenovo-experiences/locations/us-central1/functions/processVideoTask","buildConfig":{"runtime":"nodejs22","entryPoint":"processVideoTask","source":{"storageSource":{"bucket":"gcf-v2-sources-472633703949-us-central1","object":"processVideoTask/function-source.zip","generation":"1763932423903604"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/lenovo-experiences/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-472633703949-us-central1","object":"processVideoTask/function-source.zip","generation":"1763909553015947"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/lenovo-experiences/serviceAccounts/472633703949-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/lenovo-experiences/locations/us-central1/services/processvideotask","timeoutSeconds":540,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"lenovo-experiences\",\"databaseURL\":\"https://lenovo-experiences-default-rtdb.firebaseio.com\",\"storageBucket\":\"lenovo-experiences.firebasestorage.app\"}","GCLOUD_PROJECT":"lenovo-experiences","EVENTARC_CLOUD_EVENT_SOURCE":"projects/lenovo-experiences/locations/us-central1/services/processVideoTask","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"processVideoTask","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://processvideotask-rwkor6m4fa-uc.a.run.app","serviceAccountEmail":"472633703949-compute@developer.gserviceaccount.com","availableMemory":"1024Mi","allTrafficOnLatestRevision":true,"secretEnvironmentVariables":[{"key":"GEMINI_API_KEY","projectId":"lenovo-experiences","secret":"GEMINI_API_KEY","version":"6"}],"revision":"processvideotask-00057-qum","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/lenovo-experiences/locations/nam5/triggers/processvideotask-777831","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"videoTasks/{taskId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/lenovo-experiences/topics/eventarc-nam5-processvideotask-777831-670","serviceAccountEmail":"472633703949-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"85ba389a3d5ac9867509c735ef089838ba668bcb"},"environment":"GEN_2","url":"https://us-central1-lenovo-experiences.cloudfunctions.net/processVideoTask","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/472633703949/locations/us-central1/builds/ee0b2355-5560-448f-a877-73579db9ccc5","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/ee0b2355-5560-448f-a877-73579db9ccc5?project=472633703949"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/472633703949/locations/us-central1/builds/ee0b2355-5560-448f-a877-73579db9ccc5"},"done":false}
[debug] [2025-11-23T21:14:00.766Z] [update-default-us-central1-processVideoTask] Retrying task index 0
[debug] [2025-11-23T21:14:00.766Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:14:00.766Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:14:00.766Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/lenovo-experiences/locations/us-central1/operations/operation-1763932423093-64449857c7cea-eac6395e-fa94a2d3 [none]
[debug] [2025-11-23T21:14:01.200Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/lenovo-experiences/locations/us-central1/operations/operation-1763932423093-64449857c7cea-eac6395e-fa94a2d3 200
[debug] [2025-11-23T21:14:01.200Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/lenovo-experiences/locations/us-central1/operations/operation-1763932423093-64449857c7cea-eac6395e-fa94a2d3 {"name":"projects/lenovo-experiences/locations/us-central1/operations/operation-1763932423093-64449857c7cea-eac6395e-fa94a2d3","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-11-23T21:13:43.955607725Z","target":"projects/lenovo-experiences/locations/us-central1/functions/processVideoTask","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/lenovo-experiences/locations/us-central1/functions/processVideoTask","buildConfig":{"runtime":"nodejs22","entryPoint":"processVideoTask","source":{"storageSource":{"bucket":"gcf-v2-sources-472633703949-us-central1","object":"processVideoTask/function-source.zip","generation":"1763932423903604"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/lenovo-experiences/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-472633703949-us-central1","object":"processVideoTask/function-source.zip","generation":"1763909553015947"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/lenovo-experiences/serviceAccounts/472633703949-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/lenovo-experiences/locations/us-central1/services/processvideotask","timeoutSeconds":540,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"lenovo-experiences\",\"databaseURL\":\"https://lenovo-experiences-default-rtdb.firebaseio.com\",\"storageBucket\":\"lenovo-experiences.firebasestorage.app\"}","GCLOUD_PROJECT":"lenovo-experiences","EVENTARC_CLOUD_EVENT_SOURCE":"projects/lenovo-experiences/locations/us-central1/services/processVideoTask","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"processVideoTask","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://processvideotask-rwkor6m4fa-uc.a.run.app","serviceAccountEmail":"472633703949-compute@developer.gserviceaccount.com","availableMemory":"1024Mi","allTrafficOnLatestRevision":true,"secretEnvironmentVariables":[{"key":"GEMINI_API_KEY","projectId":"lenovo-experiences","secret":"GEMINI_API_KEY","version":"6"}],"revision":"processvideotask-00057-qum","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/lenovo-experiences/locations/nam5/triggers/processvideotask-777831","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"videoTasks/{taskId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/lenovo-experiences/topics/eventarc-nam5-processvideotask-777831-670","serviceAccountEmail":"472633703949-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"85ba389a3d5ac9867509c735ef089838ba668bcb"},"environment":"GEN_2","url":"https://us-central1-lenovo-experiences.cloudfunctions.net/processVideoTask","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/472633703949/locations/us-central1/builds/ee0b2355-5560-448f-a877-73579db9ccc5","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/ee0b2355-5560-448f-a877-73579db9ccc5?project=472633703949"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/472633703949/locations/us-central1/builds/ee0b2355-5560-448f-a877-73579db9ccc5"},"done":false}
[debug] [2025-11-23T21:14:11.202Z] [update-default-us-central1-processVideoTask] Retrying task index 0
[debug] [2025-11-23T21:14:11.202Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:14:11.202Z] Checked if tokens are valid: true, expires at: 1763936000824
[debug] [2025-11-23T21:14:11.202Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/lenovo-experiences/locations/us-central1/operations/operation-1763932423093-64449857c7cea-eac6395e-fa94a2d3 [none]
[debug] [2025-11-23T21:14:11.629Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/lenovo-experiences/locations/us-central1/operations/operation-1763932423093-64449857c7cea-eac6395e-fa94a2d3 200
[debug] [2025-11-23T21:14:11.629Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/lenovo-experiences/locations/us-central1/operations/operation-1763932423093-64449857c7cea-eac6395e-fa94a2d3 {"name":"projects/lenovo-experiences/locations/us-central1/operations/operation-1763932423093-64449857c7cea-eac6395e-fa94a2d3","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-11-23T21:13:43.955607725Z","target":"projects/lenovo-experiences/locations/us-central1/functions/processVideoTask","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/lenovo-experiences/locations/us-central1/functions/processVideoTask","buildConfig":{"runtime":"nodejs22","entryPoint":"processVideoTask","source":{"storageSource":{"bucket":"gcf-v2-sources-472633703949-us-central1","object":"processVideoTask/function-source.zip","generation":"1763932423903604"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/lenovo-experiences/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-472633703949-us-central1","object":"processVideoTask/function-source.zip","generation":"1763909553015947"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/lenovo-experiences/serviceAccounts/472633703949-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/lenovo-experiences/locations/us-central1/services/processvideotask","timeoutSeconds":540,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"lenovo-experiences\",\"databaseURL\":\"https://lenovo-experiences-default-rtdb.firebaseio.com\",\"storageBucket\":\"lenovo-experiences.firebasestorage.app\"}","GCLOUD_PROJECT":"lenovo-experiences","EVENTARC_CLOUD_EVENT_SOURCE":"projects/lenovo-experiences/locations/us-central1/services/processVideoTask","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"processVideoTask","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://processvideotask-rwkor6m4fa-uc.a.run.app","serviceAccountEmail":"472633703949-compute@developer.gserviceaccount.com","availableMemory":"1024Mi","allTrafficOnLatestRevision":true,"secretEnvironmentVariables":[{"key":"GEMINI_API_KEY","projectId":"lenovo-experiences","secret":"GEMINI_API_KEY","version":"6"}],"revision":"processvideotask-00057-qum","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/lenovo-experiences/locations/nam5/triggers/processvideotask-777831","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"videoTasks/{taskId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/lenovo-experiences/topics/eventarc-nam5-processvideotask-777831-670","serviceAccountEmail":"472633703949-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"85ba389a3d5ac9867509c735ef089838ba668bcb"},"environment":"GEN_2","url":"https://us-central1-lenovo-experiences.cloudfunctions.net/processVideoTask","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/472633703949/locations/us-central1/builds/ee0b2355-5560-448f-a877-73579db9ccc5","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/ee0b2355-5560-448f-a877-73579db9ccc5?project=472633703949"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/472633703949/locations/us-central1/builds/ee0b2355-5560-448f-a877-73579db9ccc5"},"done":false}
